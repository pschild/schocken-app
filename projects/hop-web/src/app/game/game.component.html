<div *ngIf="gameDetails$ | async as gameDetails">
  <div class="game-details-container">
    <h2>Spiel vom {{gameDetails.datetime | date:'dd.MM.yyyy'}}</h2>
    <div>
      {{gameDetails.datetime | date:'dd.MM.yyyy HH:mm:ss'}} Uhr
      <button mat-button color="primary" (click)="handleChangeDateClick()">
        <mat-icon>edit</mat-icon>
      </button>
    </div>
    <div>
      {{gameDetails.rounds.length}} Runde(n)
      <!-- <a *ngIf="gameDetails.rounds.length > 0 && !(isGameCompleted$ | async)" href="" [routerLink]="['/round', gameDetails.latestRound.id]">Aktuelle Runde fortsetzen</a> -->
    </div>
  </div>

  <mat-accordion>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Runden√ºbersicht
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div *ngIf="gameDetails.rounds.length === 0">
        <button mat-raised-button color="primary" [routerLink]="['/attendees']" [queryParams]="{ gameId: gameDetails.id }">Erste Runde starten</button>
      </div>
      <hop-round-list *ngIf="gameDetails.rounds.length > 0" [roundListItems]="gameDetails.rounds"></hop-round-list>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Feststellungen
        </mat-panel-title>
      </mat-expansion-panel-header>

      <hop-player-select
        *ngIf="activePlayers$ | async as activePlayers"
        [playerList]="activePlayers"
        (playerChange)="onPlayerChanged($event)"
      ></hop-player-select>

      <hop-event-type-list
        *ngIf="gameEventTypes$ | async as gameEventTypes"
        [eventTypes]="gameEventTypes"
        [disableButtons]="isGameCompleted$ | async"
        (add)="onAddEvent($event)"
      ></hop-event-type-list>

      <hop-event-list
        *ngIf="combinedEvents$ | async as combinedEvents"
        [events]="combinedEvents"
        (remove)="onRemoveEvent($event)"
      ></hop-event-list>
    </mat-expansion-panel>
  </mat-accordion>
</div>